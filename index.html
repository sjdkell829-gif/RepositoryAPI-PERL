<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Anime Power API - Erick</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0d1117; color: white; padding: 20px; text-align: center; }
        .form-box { background: #161b22; padding: 20px; border-radius: 10px; border: 1px solid #30363d; max-width: 400px; margin: 0 auto 30px; }
        input { width: 90%; padding: 10px; margin: 10px 0; background: #0d1117; color: white; border: 1px solid #30363d; border-radius: 5px; }
        button { background: #238636; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; max-width: 1000px; margin: auto; }
        .card { background: #161b22; padding: 15px; border-radius: 8px; border-left: 5px solid #58a6ff; text-align: left; }
        .card h3 { color: #f0883e; margin: 0; }
    </style>
</head>
<body>
    <h1>Niveles de Poder ⚡</h1>
    <div class="form-box">
        <input type="text" id="nombre" placeholder="Nombre (Ej. Shadow)" required>
        <input type="text" id="universo" placeholder="Universo" required>
        <input type="text" id="poder" placeholder="Nivel (Ej. I am Atomic)" required>
        <button onclick="registrar()">Registrar Personaje</button>
    </div>
    <div class="grid" id="lista"></div>

    <script>
        const api = '/cgi-bin/api.pl';
        function cargar() {
            fetch(api).then(r => r.json()).then(res => {
                const div = document.getElementById('lista');
                div.innerHTML = '';
                res.data.forEach(p => {
                    div.innerHTML += `<div class="card"><h3>${p.nombre}</h3><p>${p.universo}</p><b>${p.nivel_poder}</b></div>`;
                });
            }).catch(e => console.error("Error cargando:", e));
        }
        function registrar() {
            const data = {
                nombre: document.getElementById('nombre').value,
                universo: document.getElementById('universo').value,
                nivel_poder: document.getElementById('poder').value
            };
            fetch(api, { method: 'POST', body: JSON.stringify(data) }).then(() => {
                alert("¡Personaje en la base!");
                cargar();
            });
        }
        cargar();
    </script>
</body>
</html>